# Τι είναι το DNS Footprinting?

**Στοιχεία άρθρου**
- **Τίτλος:** What is DNS Footprinting?
- **Συντάκτης:** 0xshivam (GeeksforGeeks)
- **Ετικέτες:** Ethical Hacking, Ethical Hacking - DDos

---

Το DNS footprinting είναι μια τεχνική αναγνώρισης (reconnaissance) που χρησιμοποιείται για τη συλλογή πληροφοριών σχετικά με την υποδομή DNS ενός στόχου. Βοηθάει επιτιθέμενους, penetration testers και ηθικούς χάκερ να κατανοήσουν την τοπολογία του δικτύου και να εντοπίσουν ευπάθειες. Το DNS λειτουργεί ως ο "τηλεφωνικός κατάλογος" του Internet, μεταφράζοντας ονόματα τομέων (π.χ. `example.com`) σε διευθύνσεις IP (π.χ. `192.168.1.1`). Με τη συλλογή δεδομένων σχετικών με το DNS, οι επιτιθέμενοι χαρτογραφούν δίκτυα, αποκαλύπτουν λεπτομέρειες υποδομής και εντοπίζουν αδύνατα σημεία προς εκμετάλλευση.

Κατά το DNS footprinting συλλέγονται τα εξής δεδομένα:

1. Ονόματα DNS τομέων
2. Ονόματα υπολογιστών
3. Διευθύνσεις IP
4. Υποτομείς και κρυφοί (hidden) τομείς
5. Εγγραφές DNS
6. Δεδομένα ζώνης DNS (DNS zone data)
7. Πληροφορίες σχετικές με το δίκτυο
8. Τοποθεσίες και τύποι διακομιστών
9. Hosts εντός του δικτύου

Αφού συλλεχθούν τα δεδομένα, οι επιτιθέμενοι χρησιμοποιούν τα δεδομένα ζώνης DNS για να εντοπίσουν κρίσιμα hosts εντός του δικτύου και ακόμη να προετοιμάσουν επιθέσεις κοινωνικής μηχανικής (social engineering). Οι συλλεγμένες εγγραφές DNS αποκαλύπτουν σημαντικές πληροφορίες σχετικά με τον τύπο και την τοποθεσία των διακομιστών, οι οποίες μπορούν να χρησιμοποιηθούν για την εκμετάλλευση ευπαθειών ή για τη σχεδίαση στοχευμένων επιθέσεων.

---

## Κύριες εγγραφές που έχουν σημασία στο DNS Footprinting

| Εγγραφή | Περιγραφή |
|---|---|
| **A** | Εγγραφή διεύθυνσης — DNS host record που αντιστοιχίζει όνομα σε IP. |
| **MX** | Mail exchange — καθορίζει τον SMTP mail server. |
| **NS** | Καθορίζει τον authoritative Name Server. |
| **CNAME** | Canonical Name — alias που δείχνει ένα hostname σε άλλο hostname. |
| **SOA** | Start of Authority — ο authoritative Name server για τη ζώνη. |
| **PTR** | Pointer — επιτρέπει reverse lookup: από IP σε hostname. |
| **TXT** | Text record — περιέχει μηχανικά αναγνώσιμα δεδομένα (π.χ. DKIM). |
| **HINFO** | Host information — πληροφορίες για CPU και OS (συνίσταται να αποφεύγεται). |
| **SRV** | Service records — δηλώνει υπηρεσίες και πόρτες όπου τρέχουν. |

---

## Διαδικασία DNS Footprinting

Το DNS footprinting είναι μια σχετικά απλή διαδικασία και μπορεί να εκτελεστεί με διάφορα εργαλεία και ιστοσελίδες. Εδώ παρουσιάζονται τα `nslookup` και `dig`.

### NSLOOKUP

Το `nslookup` είναι ένα command-line εργαλείο διαχείρισης δικτύου για την ερώτηση του DNS και την απόκτηση αντιστοιχίσεων μεταξύ domain name και IP ή άλλων εγγραφών DNS.

**Βασική χρήση:**
```bash
nslookup <target domain>
nslookup -type=<recordtype> <target domain>
```

**Παράδειγμα:**
(Στο πρωτότυπο άρθρο υπάρχουν εικόνες με έξοδο `nslookup`. Εδώ διατηρούμε την επίδειξη με εντολές και περιγραφή της εξόδου.)

### DIG

Το `dig` είναι επίσης ένα command-line εργαλείο διαχείρισης DNS.

**Βασική χρήση:**
```bash
dig <target domain>
dig <target domain> <record type>
dig <target domain> any
```

**Παράδειγμα:**
Για να λάβετε εγγραφές MX:
```bash
dig example.com MX
```
Επιστρέφει την εγγραφή MX του domain.  

Για να ζητήσετε όλες τις διαθέσιμες εγγραφές:
```bash
dig example.com any
```
(Το `ANY` προσπαθεί να επιστρέψει όσο το δυνατόν περισσότερους τύπους εγγραφών.)

Το πρωτότυπο άρθρο περιείχε στιγμιότυπα τερματικού που δείχνουν τα αποτελέσματα των εντολών `dig`/`nslookup`. Οι εικόνες τους παρατίθενται παρακάτω με τα αρχικά URL τους.

**Εικόνες (από πρωτότυπο):**
- ![Nslookup εικόνα 1](https://media.geeksforgeeks.org/wp-content/uploads/20220910105217/dnsfootprinting1.png)
- ![Nslookup εικόνα 2](https://media.geeksforgeeks.org/wp-content/uploads/20220910105218/dnsfootprinting2.png)
- ![dig παράδειγμα 1](https://media.geeksforgeeks.org/wp-content/uploads/20220910111650/dnsfootprinting3.png)
- ![dig παράδειγμα 2](https://media.geeksforgeeks.org/wp-content/uploads/20220910111651/dnsfootprinting4.png)

---

## Γιατί έχει σημασία το DNS Footprinting

Οι πληροφορίες αυτές βοηθούν τους επιτιθέμενους να βρουν λεπτομέρειες για ιστοτόπους και υποδομές. Κύρια σημεία:

1. **Ανακάλυψη επιφάνειας επίθεσης (Attack Surface Discovery):** Αποκαλύπτει σημεία εισόδου για επιθέσεις (π.χ. λανθασμένα ρυθμισμένοι servers, ανοιχτές υπηρεσίες).
2. **Χαρτογράφηση δικτύου (Network Mapping):** Αποκαλύπτει σχέσεις μεταξύ domains, υποτομέων και φυσικής υποδομής.
3. **Εντοπισμός ευπαθειών:** Αποκαλύπτει παλιές εγγραφές, λανθασμένες ρυθμίσεις DNS ή εκτεθειμένα εσωτερικά hosts.
4. **Προετοιμασία κοινωνικής μηχανικής (Social Engineering Prep):** Συλλέγει πληροφορίες για phishing (π.χ. MX records που αποκαλύπτουν mail servers).

---

## Πρακτικά σενάρια επίθεσης (Practical Attack Scenarios)

Το DNS footprinting δεν είναι απλώς συλλογή πληροφοριών· μπορεί να αποκαλύψει ευπάθειες που επιτρέπουν συγκεκριμένα επιθετικά μοτίβα.

### Ανακατάληψη υποτομέων (Subdomain Takeover)

1. Εταιρείες χρησιμοποιούν cloud πλατφόρμες (π.χ. AWS, Azure) και μπορεί να εγκαταλείψουν υπηρεσίες αλλά να αντικατοπτρίζουν ακόμα εγγραφές DNS (CNAMEs) προς αυτές.
2. Τέτοιες εγγραφές μπορεί να δείχνουν πόρους που δεν υπάρχουν πλέον.
3. Ένας επιτιθέμενος μπορεί να δημιουργήσει ή να διεκδικήσει τον εγκαταλελειμμένο πόρο στον αντίστοιχο πάροχο cloud.
4. Ο υποτομέας τότε δείχνει στην υποδομή του επιτιθέμενου και ο επιτιθέμενος αποκτά έλεγχο του υποτομέα.
5. Μπορεί να φιλοξενήσει κακόβουλο περιεχόμενο στο όνομα του θύματος, κάνοντας τις επιθέσεις πιο πειστικές.

### Υποδομή phishing (Phishing Infrastructure)

1. Επιτιθέμενοι συγκομίζουν εγγραφές **MX** που αποκαλύπτουν ποιους servers επεξεργάζονται τα email για ένα domain.
2. Μπορούν να σχεδιάσουν σελίδες σύνδεσης (login pages) που μιμούνται την υπηρεσία email της εταιρείας.
3. Θύματα εισάγουν διαπιστευτήρια πιστεύοντας ότι είναι η πραγματική πύλη.
4. Ο επιτιθέμενος αποσπά usernames, passwords και ενδεχομένως tokens πολυπαραγοντικής αυθεντικοποίησης.

### Χαρτογράφηση δικτύου (Network Mapping)

- Συνδυάζοντας εγγραφές **A** και **PTR**, οι επιτιθέμενοι μπορούν να κατασκευάσουν ένα πλήρες χάρτη του δικτύου της εταιρείας, εντοπίζοντας ενεργούς servers, εσωτερικά hosts που δεν θα έπρεπε να είναι εξωτερικά ορατοί, κ.λπ.
- Αυτό επιτρέπει στοχευμένες επιθέσεις σε συγκεκριμένες μηχανές ή υπηρεσίες.

### Εκμετάλλευση υπηρεσιών (Service Exploitation)

1. Οι εγγραφές **SRV** δείχνουν ποιες υπηρεσίες τρέχουν και σε ποιες θύρες.
2. Επιτιθέμενοι μπορούν να αναζητήσουν υπηρεσίες όπως βάσεις δεδομένων (π.χ. Redis, MySQL).
3. Αν οι υπηρεσίες είναι λανθασμένα ρυθμισμένες ή εκτεθειμένες, μπορούν να χρησιμοποιηθούν για κλοπή δεδομένων ή πλήρη έλεγχο του συστήματος.

---

## Αμυντικά μέτρα κατά του DNS Footprinting

Οργανισμοί μπορούν να εφαρμόσουν αρκετά μέτρα για να ελαχιστοποιήσουν τις πληροφορίες που διαρρέουν και να δυσκολέψουν τους επιτιθέμενους:

1. **Περιορισμός Zone Transfers:** Επιτρέπετε zone transfers μόνο προς εξουσιοδοτημένους/έμπιστους DNS servers. Αν οποιοσδήποτε μπορεί να κάνει zone transfer, μπορεί να κατεβάσει ολόκληρη τη λίστα εγγραφών.
2. **Αποφυγή HINFO records:** Τα HINFO αποκαλύπτουν hardware/OS — προτιμότερο να διαγράφονται/μη δημιουργούνται.
3. **Αφαίρεση εσωτερικών IP από δημόσιο DNS:** Μην εμφανίζετε ιδιωτικές/εσωτερικές IP διευθύνσεις σε δημόσιους DNS servers.
4. **Παρακολούθηση ύποπτων ερωτημάτων:** Εντοπίστε μοτίβα όπως μεγάλο αριθμό αιτημάτων από μία IP ή πολλαπλά αιτήματα για υποτομείς (DNS enumeration).
5. **Εφαρμογή DNSSEC:** Τα DNSSEC (Domain Name System Security Extensions) προστατεύουν τα DNS δεδομένα κατά τη μετάδοση και βοηθούν στην αποτροπή cache poisoning / spoofing, επιβεβαιώνοντας την αυθεντικότητα των απαντήσεων.

---

## Συμπέρασμα

Το DNS footprinting μετατρέπει φαινομενικά ακίνδυνες δημόσιες πληροφορίες σε εκμεταλλεύσιμα διανύσματα επίθεσης. Οι αμυνόμενοι πρέπει να υιοθετούν νοοτροπία «assume breach» και να πραγματοποιούν περιστασιακά footprinting στα δικά τους δίκτυα για να εντοπίσουν εκτεθειμένα περιουσιακά στοιχεία (assets).


