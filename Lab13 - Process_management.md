# Διαχείριση Διαδικασιών (Process Management)
## Οι τροχοί είναι σε κίνηση

### Εισαγωγή
Το Linux γενικά είναι ένα αρκετά σταθερό σύστημα. Παρ' όλα αυτά, περιστασιακά μπορεί να παρουσιαστούν προβλήματα και μερικές φορές θέλουμε να προσαρμόσουμε τη λειτουργία του συστήματος ώστε να ταιριάζει καλύτερα στις ανάγκες μας. Σε αυτή την ενότητα θα δούμε σύντομα πώς μπορούμε να διαχειριστούμε προγράμματα ή διαδικασίες (processes) σε ένα σύστημα Linux.

### Τι είναι οι Διαδικασίες;
Ένα πρόγραμμα είναι μια σειρά εντολών που λένε στον υπολογιστή τι να κάνει. Όταν εκτελούμε ένα πρόγραμμα, αυτές οι εντολές αντιγράφονται στη μνήμη και δεσμεύεται χώρος για μεταβλητές και άλλα στοιχεία που απαιτούνται για τη διαχείριση της εκτέλεσής του. Αυτή η τρέχουσα εκτέλεση ενός προγράμματος ονομάζεται **διαδικασία (process)** και είναι οι διαδικασίες αυτές που διαχειριζόμαστε.

---

### Τι τρέχει αυτή τη στιγμή;
Το Linux, όπως τα περισσότερα σύγχρονα λειτουργικά συστήματα, είναι **πολυδιεργασιακό**. Αυτό σημαίνει ότι πολλές διαδικασίες μπορούν να τρέχουν ταυτόχρονα. Εκτός από τις διαδικασίες που εκτελούμε εμείς, μπορεί να υπάρχουν άλλοι χρήστες στο σύστημα και το ίδιο το OS τρέχει διάφορες διαδικασίες για τη διαχείριση του συστήματος.

Μπορούμε να δούμε τι τρέχει αυτή τη στιγμή με το πρόγραμμα `top`.

```bash
top
```

Παράδειγμα απλού αποτελέσματος:

```
top
Tasks: 174 total, 3 running, 171 sleeping, 0 stopped
KiB Mem: 4050604 total, 3114428 used, 936176 free
KiB Swap: 2104476 total, 18132 used, 2086344 free

 PID USER %CPU %MEM COMMAND
6978 ryan 3.0  21.2 firefox
  11 root 0.3   0.0 rcu_preempt
6601 ryan 2.0   2.4 kwin
...
```

**Ανάλυση:**
- **Γραμμή 2:** "Tasks" σημαίνει διαδικασίες (processes). Πολλές θα είναι συστημικές και σε κατάσταση ύπνου (sleeping).
- **Γραμμή 3:** Μνήμη RAM. Μην ανησυχείτε αν μεγάλο ποσοστό της RAM χρησιμοποιείται. Το Linux κρατά προγράμματα που χρησιμοποιήθηκαν πρόσφατα στη μνήμη για ταχύτερη εκτέλεση.
- **Γραμμή 4:** Εικονική μνήμη (Virtual Memory). Αν η χρήση είναι υψηλή, μπορεί να χρειαστεί να αυξήσετε το μέγεθός της.
- **Γραμμές 6-10:** Λίστα διαδικασιών που καταναλώνουν τους περισσότερους πόρους. Σημαντικές στήλες: **CPU** και **MEM**. Αν κάποια διαδικασία καταναλώνει πολλούς πόρους συνεχόμενα, αξίζει να διερευνηθεί.

Άλλο πρόγραμμα: `ps` για λίστα διαδικασιών.

```bash
ps aux
```

---

### Τερματισμός (Killing) μιας Διαδικασίας
Όταν ένα πρόγραμμα κολλήσει ή δεν αποκρίνεται, μπορούμε να το τερματίσουμε.

```bash
ps aux | grep 'firefox'
```

Βρίσκουμε τον **PID (Process ID)** και χρησιμοποιούμε το `kill`.

```bash
kill <PID>
```

Αν η διαδικασία δεν τερματιστεί, μπορούμε να χρησιμοποιήσουμε το σήμα 9:

```bash
kill -9 <PID>
```

> Σημείωση: Οι κανονικοί χρήστες μπορούν να τερματίζουν μόνο τις δικές τους διαδικασίες. Ο χρήστης root μπορεί να τερματίσει οποιαδήποτε διαδικασία.

---

### Κλείδωμα Desktop
Αν μια διαδικασία κολλήσει και μπλοκάρει ολόκληρο το GUI:

- Linux έχει πολλές **εικονικές κονσόλες**. Συνήθως βλέπουμε την κονσόλα 7 (GUI).  
- Εναλλαγή κονσολών: `CTRL + ALT + F<console>` (π.χ. F2 για κονσόλα 2).  
- Τερματίζουμε τις διαδικασίες από εκεί και επιστρέφουμε στο GUI με `CTRL + ALT + F7`.

---

### Προγράμματα στο Foreground και Background
- **Foreground:** Τρέχουν κανονικά και μπλοκάρουν το τερματικό μέχρι να ολοκληρωθούν.
- **Background:** Τρέχουν χωρίς να μπλοκάρουν. Προσθέτουμε `&` στο τέλος της εντολής.

```bash
sleep 5 &
```

- `jobs` εμφανίζει τα τρέχοντα background jobs.
- `CTRL + Z` παύει ένα foreground job και το στέλνει στο background.
- `fg <job_number>` φέρνει ένα background job στο foreground.

---

### Περίληψη Εντολών
| Εντολή | Περιγραφή |
|--------|-----------|
| `top`  | Προβολή real-time δεδομένων για τις διαδικασίες. |
| `ps`   | Λίστα διαδικασιών. |
| `kill` | Τερματισμός διαδικασίας. |
| `jobs` | Προβολή τρεχόντων background jobs. |
| `fg`   | Επαναφορά διαδικασίας από background σε foreground. |
| `CTRL + Z` | Παύση foreground διαδικασίας και αποστολή στο background. |

---

### Δραστηριότητες
1. Ξεκινήστε μερικά προγράμματα στο desktop, εντοπίστε τα PID τους με `ps` και τερματίστε τα με `kill`.
2. Δοκιμάστε να κάνετε το ίδιο από άλλη εικονική κονσόλα.
3. Παίξτε με την εντολή `sleep` και μετακινήστε διαδικασίες μεταξύ foreground και background.

