# Piping και Redirection!
**Διατηρώντας τη ροή των δεδομένων**

## Εισαγωγή
Μάθε πόσο εύκολο είναι να χρησιμοποιήσεις το **piping** και το **redirection** για να δημιουργήσεις ισχυρές ροές εργασίας που θα αυτοματοποιούν τη δουλειά σου, εξοικονομώντας χρόνο και προσπάθεια.

Στις προηγούμενες ενότητες εξετάσαμε φίλτρα που επεξεργάζονται δεδομένα για εμάς. Σε αυτή την ενότητα θα δούμε πώς μπορούμε να τα συνδέσουμε για να κάνουμε πιο ισχυρή επεξεργασία δεδομένων.

Αν και οι μηχανισμοί είναι απλοί, είναι σημαντικό να κατανοήσεις τις διάφορες ιδιότητες της συμπεριφοράς τους για να τους χρησιμοποιήσεις αποτελεσματικά.

---

## Τι είναι αυτά;
Κάθε πρόγραμμα που εκτελείται στη γραμμή εντολών έχει αυτόματα **τρεις ροές δεδομένων**:

- **STDIN (0)** – Standard Input: Δεδομένα που εισάγονται στο πρόγραμμα.  
- **STDOUT (1)** – Standard Output: Δεδομένα που εκτυπώνονται από το πρόγραμμα (προεπιλογή: τερματικό).  
- **STDERR (2)** – Standard Error: Μηνύματα σφαλμάτων (προεπιλογή: τερματικό).  

Το **piping** και το **redirection** μας επιτρέπουν να συνδέουμε αυτές τις ροές μεταξύ προγραμμάτων και αρχείων για να κατευθύνουμε τα δεδομένα με ενδιαφέροντες και χρήσιμους τρόπους.

---

## Ανακατεύθυνση σε Αρχείο
Συνήθως, η έξοδος εμφανίζεται στην οθόνη. Αν θέλουμε να την αποθηκεύσουμε σε αρχείο:

```bash
ls > myoutput
```

- Το `>` λέει στο τερματικό να αποθηκεύσει την έξοδο σε αρχείο αντί να την εμφανίσει στην οθόνη.  
- Αν το αρχείο δεν υπάρχει, δημιουργείται αυτόματα.  

```bash
cat myoutput
```

Αυτό εμφανίζει το περιεχόμενο του αρχείου, ένα στοιχείο ανά γραμμή.

### Παρατήρηση
- Η μορφοποίηση μπορεί να διαφέρει από την οθόνη, καθώς το αρχείο αποθηκεύεται σε μία γραμμή ανά καταχώρηση.
- Το αρχείο δημιουργείται πριν εκτελεστεί η εντολή, γι’ αυτό εμφανίζεται και στη λίστα των αρχείων.

---

## Αποθήκευση σε Υπάρχον Αρχείο
- Το `>` **καθαρίζει** το αρχείο πριν αποθηκεύσει νέα δεδομένα.  
- Το `>>` **προσθέτει** νέα δεδομένα στο τέλος του αρχείου:

```bash
ls >> myoutput
```

---

## Ανακατεύθυνση από Αρχείο
Με το `<` μπορούμε να στείλουμε δεδομένα **από ένα αρχείο στο STDIN** ενός προγράμματος:

```bash
wc -l < myoutput
```

- Η έξοδος δεν περιλαμβάνει το όνομα του αρχείου, σε αντίθεση με το `wc -l myoutput`.

Συνδυασμός:

```bash
wc -l < barry.txt > myoutput
```

---

## Ανακατεύθυνση STDERROR
- Το STDERR είναι η ροή αριθμός 2.
- Μπορούμε να την ανακατευθύνουμε σε αρχείο:

```bash
ls -l video.mpg blah.foo 2> errors.txt
```

- Για να συνδυάσουμε STDOUT και STDERR σε ένα αρχείο:

```bash
ls -l video.mpg blah.foo > myoutput 2>&1
```

---

## Piping (|)
Το **piping** τροφοδοτεί την έξοδο ενός προγράμματος ως είσοδο σε άλλο:

```bash
ls | head -3
```

- Μπορείς να δημιουργήσεις αλυσίδες:

```bash
ls | head -3 | tail -1
```

- Συνδυάζονται με redirection:

```bash
ls | head -3 | tail -1 > myoutput
```

---

## Πιο Παραδείγματα
### Ταξινόμηση και προβολή
```bash
ls -l /etc | tail -n +2 | sort
```

### Προβολή με less
```bash
ls -l /etc | less
```

### Φίλτρα για δικαιώματα
```bash
ls -l ~ | grep '^.....w'
```

### Καταμέτρηση αρχείων ανά χρήστη
```bash
ls -l /projects/ghosttrail | tail -n +2 | sed 's/\s\s*/ /g' | cut -d ' ' -f 3 | sort | uniq -c
```

---

## Σύνοψη
| Εντολή | Περιγραφή |
|---------|-----------|
| `>` | Αποθήκευση εξόδου σε αρχείο |
| `>>` | Προσθήκη εξόδου σε αρχείο |
| `<` | Ανάγνωση εισόδου από αρχείο |
| `2>` | Ανακατεύθυνση μηνυμάτων λάθους |
| `|` | Σύνδεση εξόδου σε άλλο πρόγραμμα |

**Streams:** Κάθε πρόγραμμα έχει STDIN, STDOUT, STDERR.

---

## Δραστηριότητες
1. Αποθήκευσε την έξοδο διάφορων εντολών σε αρχείο. Πείραξε με overwrite και append. Χρησιμοποίησε απόλυτα και σχετικά paths.  
2. Εμφάνισε μόνο το 20ο τελευταίο αρχείο στον κατάλογο `/etc`.  
3. Μέτρησε πόσα αρχεία και φάκελοι έχουν δικαιώματα εκτέλεσης στον προσωπικό σου κατάλογο.
