## Firewalls

Τα Firewalls αποτελούν κεντρικό αρχιτεκτονικό στοιχείο σε κάθε δίκτυο. Σχεδιάζονται για να αποκλείουν όλη την κυκλοφορία δικτύου, εκτός από την κυκλοφορία που επιτρέπεται ρητά. Τα Firewalls λειτουργούν στο Layer 4, συνήθως ελέγχοντας την πρόσβαση TCP και UDP σε εσωτερικούς πόρους. Τα Next-Generation Firewalls (NGFW) λειτουργούν σε όλα τα επίπεδα του OSI, συμπεριλαμβανομένου του Layer 7.

Η κυκλοφορία που εισέρχεται σε ένα δίκτυο, π.χ. μέσω Firewall, ονομάζεται **ingress traffic**, ενώ η κυκλοφορία που εξέρχεται **egress traffic**.

---

## Layer 4 Firewall

Το παραδοσιακό Firewall είναι ένα **Layer 4 Firewall** με δυνατότητες όπως:

- NAT
- Routing
- Αποκλεισμός ή επιτρεπόμενη κυκλοφορία
- Παρακολούθηση ενεργών συνδέσεων δικτύου
- Υποστήριξη VPN συνδέσεων

> **Σημείωση**: Αυτά τα Firewalls είναι συνήθως φθηνότερα και προσφέρουν μεγαλύτερο throughput στο δίκτυο από ένα πιο σύγχρονο NGFW.

---

## NGFW ("Next-Generation Firewalls")

Ένα σύγχρονο Firewall έχει δυνατότητες πολύ ευρύτερες από ένα Layer 4 Firewall, κυρίως σε θέματα ασφάλειας.  
Ένα NGFW μπορεί επίσης να παρακολουθεί ενεργές συνδέσεις δικτύου, αλλά συνήθως μπορεί να παρακολουθεί και:

- Τοποθεσίες μέσω geo-location βάσεων δεδομένων (μπορεί να κάνει block/allow βάσει γεωγραφικής θέσης, αλλά αυτές δεν είναι πάντα ακριβείς και μπορούν να παρακαμφθούν με VPN ή jump stations).
- Χρήστες
- Εφαρμογές
- Συνεδρίες
- Θύρες και υπηρεσίες
- IP διευθύνσεις

Άλλες δυνατότητες ενός NGFW περιλαμβάνουν:

- Αναγνώριση και έλεγχο εφαρμογών στο δίκτυο.
- Virtualization ως software Firewall.
- Απλή και κατανοητή διαχείριση.
- Προστασία από γνωστές απειλές μέσω **Intrusion Prevention System (IPS)**.
- Δυνατότητα ανίχνευσης και αποτροπής άγνωστων απειλών μέσω sandboxing.
- Διαχείριση άγνωστης κυκλοφορίας (traffic που δεν ανήκει σε κάποια εφαρμογή).
- Επιθεώρηση και τερματισμός κρυπτογραφημένης κυκλοφορίας.
- Έλεγχος χρηστών, όχι μόνο συστημάτων μέσω IP διευθύνσεων.

![Firewall](https://www.w3schools.com/cybersecurity/img_firewalls-1.png)

> **Σημείωση**: Οι δυνατότητες ενός NGFW εξαρτώνται από τις άδειες χρήσης και την απόδοση του hardware που το τρέχει.

---

## Firewall Administration

Ένα Firewall μπορεί να διαχειρίζεται μέσω ιδιόκτητης εφαρμογής ή μέσω web-browser (HTTP).  
Οι πόρτες διαχείρισης των Firewalls θα πρέπει να είναι απομονωμένες από την κανονική πρόσβαση χρηστών και να συνδέονται με directory υπηρεσίες (π.χ., Active Directory).

---

## Segmentation

Τα Firewalls μπορούν να διαχωρίζουν την κυκλοφορία σε **segments ή zones**, όπου επιτρέπεται επικοινωνία μόνο εντός συγκεκριμένων τμημάτων.

![Firewall Segmentation](https://www.w3schools.com/cybersecurity/img_firewall-segmentation.svg)

Χωρίς segmentation, οι χρήστες και τα συστήματα επικοινωνούν απευθείας (**flat network**).

![Firewall No Segmentation](https://www.w3schools.com/cybersecurity/img_no-segmentation.svg)

Περισσότερη segmentation μπορεί να βασίζεται σε υπηρεσίες ή λειτουργίες, π.χ., web servers, βάσεις δεδομένων κ.λπ.

![Firewall More Segmentation](https://www.w3schools.com/cybersecurity/img_more-segmentation.svg)

Η πιο ασφαλής προσέγγιση είναι η **zero-trust architecture**, όπου όλα τα συστήματα πρέπει να επιτρέπεται ρητά να επικοινωνούν.  
Η σύνδεση με user directory επιτρέπει **user-based policy control**, π.χ.:

- IT Administrators: πρόσβαση σε όλα τα management protocols.
- HR: μόνο πρόσβαση σε HR πλατφόρμες.
- Helpdesk: μόνο helpdesk υπηρεσίες.
- Άγνωστοι χρήστες: αναγνώριση και κατάλληλη παροχή δικαιωμάτων.

> **Σημείωση**: Ένα κοινό user directory είναι το Microsoft Active Directory.

---

## IPS ("Intrusion Prevention System") και IDS ("Intrusion Detection System")

Μπορούν να λειτουργούν standalone ή ενσωματωμένα σε NGFW.  
Ένα HIDS είναι IDS/IPS σε host επίπεδο.

![IPS](https://www.w3schools.com/cybersecurity/img_ips.svg)

- **IPS**: ανιχνεύει και μπλοκάρει απειλές.
- **IDS**: μόνο ανιχνεύει.

> **Σημείωση**: Συχνές ενημερώσεις signatures βοηθούν στην προστασία από νέες απειλές.

---

## Content and Application Filtering

Το Firewall μπορεί να ανιχνεύει εφαρμογές και περιεχόμενο δικτύου.

### URL Filtering

Μπορεί να ελέγχει domains μέσω βάσεων δεδομένων και να επιτρέπει μόνο αποδεκτές κατηγορίες:

- Π.χ., επιτρέπεται news, απαγορεύεται gambling.

![URL Filtering](https://www.w3schools.com/cybersecurity/img_urlfiltering.svg)

Άλλες λειτουργίες περιλαμβάνουν captive web portals για προειδοποίηση χρηστών.

Κατηγορίες περιεχομένου:

- Hacking, Nudity, Violence, Phishing, Dating, IM, Entertainment, Anonymizing

![URL Filtering Categories](https://www.w3schools.com/cybersecurity/img_urlfiltering-categories.png)

### Applications

Το Firewall μπορεί να αναγνωρίζει εφαρμογές σε Layer 7, όχι μόνο τα πρωτόκολλα.

![Content](https://www.w3schools.com/cybersecurity/img_content.svg)  
![Application Control](https://www.w3schools.com/cybersecurity/img_application-control.png)

---

## Content Control

Μπορεί να αναλύει περιεχόμενο αρχείων:

- Word, Executables, Source-code, Scripts

![Content Control](https://www.w3schools.com/cybersecurity/img_contentcontrol.svg)

Υποστηρίζονται πολλά πρωτόκολλα: HTTP, SMB, FTP, IMAP/POP3, SMTP.

---

## Sandboxing

Εκτέλεση αρχείων σε ασφαλές περιβάλλον για ανίχνευση κακόβουλης συμπεριφοράς.

![Sandboxing](https://www.w3schools.com/cybersecurity/img_sandboxing.svg)

Υποστηρίζει διαφορετικές πλατφόρμες: Windows, Android, Linux.  
Αρχεία που μπορούν να εξεταστούν: ZIP, Office, PDF, Java, JavaScript, Screensavers.

Διαθέσιμες sandboxes online:

- [JoeSandbox](https://www.joesandbox.com/)
- [VirusTotal](https://www.virustotal.com/)
- [Hybrid Analysis](https://www.hybrid-analysis.com/)
- [Any.Run](https://any.run/)

Εγκατάσταση sandbox: [CuckooSandbox](https://cuckoosandbox.org/)

---

## Decrypting Traffic

Τα Firewalls μπορούν να εγκαθιστούν πιστοποιητικά για αποκρυπτογράφηση traffic, είτε ingress είτε egress, για επιθεώρηση περιεχομένου.

![Firewall Decrypt](https://www.w3schools.com/cybersecurity/img_firewall-decrypt.png)

> **Σημείωση**: Ingress = εισερχόμενη κυκλοφορία, Egress = εξερχόμενη κυκλοφορία.

### Unknown Traffic

Μη αναγνωρίσιμη κυκλοφορία μπορεί να μπλοκαριστεί, ειδικά σε υψηλού κινδύνου δίκτυα.

![Unknown Traffic](https://www.w3schools.com/cybersecurity/img_firewall-unknown-traffic.png)

---

## WAF ("Web Application Firewall")

Πιο εξειδικευμένο Firewall για HTTP.  
Δυνατότητες:

- Redundancy servers
- Εφαρμογή best-practices (encryption, MFA)
- Front-end προστασία για πολλαπλούς web servers

> **Σημείωση**: Οι WAF είναι ειδικά σχεδιασμένα για HTTP και παρέχουν πολύ χρήσιμες λειτουργίες για διαχειριστές.
